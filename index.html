<!DOCTYPE html>
<html>
<head>
<title>フォーム</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<style type="text/css">
.containing-element .ui-slider-switch { width: 9em }
.ph-tap{}
.ph-tapped{ background: #6495ed }

#menu { display: none; }
#menu a { background: #CCC; color: #333; font-weight: bold; padding: 5px 10px; border: none; }
#menu a:hover { background: #aaa; } 
</style>

<link rel="stylesheet" href="jquery.mobile-1.4.0.min.css"/>
<link rel="stylesheet" href="custom.css"/>
<link rel="stylesheet" href="srobbin-jquery-pageslide-d00801f/jquery.pageslide.css"/>
<script src="jquery.js"></script>
<script src="jquery.mobile-1.4.0.min.js"></script>

<script type="text/javascript">
  var g_mygamenid='#s1';
  var game_num=0;
  var maxloop=5;
  var g_strLeft=''
  var g_strRight='';
  var g_nowGameNum=0;
  var games = null;
  var g_gameindex = 0;
  var g_lastGameindex = 0;
  var g_men =0;
  var g_doubles=false;

var MemberCls = function(id,name) {
    this.id = id;
    this.name = name;
    this.winnum = 0;
    this.losenum = 0;
    this.drawnum = 0;
}

MemberCls.prototype.resetScore = function() {
   this.winnum = 0;
   this.losenum = 0;
   this.drawnum = 0;
}

MemberCls.prototype.isId = function(id) {
   return (this.id == id);
}


MemberCls.prototype.addWinNum = function(winteam) {
   var i = winteam.length;
   var ret = false;
   do {
     if(winteam[(winteam.length - i)] == this.id) {
       this.winnum++;
       ret = true;
       break;
     }
   } while(--i);
   return ret;
}

MemberCls.prototype.addLoseNum = function(loseteam) {
   var i = loseteam.length;
   var ret = false;
   do {
     if(loseteam[(loseteam.length - i)] == this.id) {
       this.losenum++;
       ret = true;
       break;
     }
   } while(--i);
   return ret;
}

MemberCls.prototype.addDrawNum = function(team1,team2) {
   var i = team1.length;
   var l = team2.length;
   var ret = false;
   do {
     if(team1[(team1.length - i)] == this.id) {
       this.drawnum++;
       ret = true;
       break;
     }
   } while(--i);
   if(ret != true) {
     do {
         if(team2[(team2.length - l)] == this.id) {
         this.drawnum++;
         ret = true;
         break;
        }
     } while(--l);
   }
   return ret;
}

MemberCls.prototype.getTextHead = function() {
  return this.id + ' : '  + this.name;
}

MemberCls.prototype.getTextEnd = function() {
  return this.name + ' さん ' + this.winnum + ' 勝 ' + this.losenum + ' 負 ' + this.drawnum + ' 分';
}

var MemberCtrl = function() {
    this.members = null;
    this.dobules = false;
}

MemberCtrl.prototype.resetGames = function() {
  var i = this.members.length;
  do {
    this.members[(this.members.length - i)].resetScore();
  } while (--i);
}


MemberCtrl.prototype.getMembersNum = function() {
    if(this.members != null) {
      return this.members.length;
    } else {
      return 0;
    }
}

MemberCtrl.prototype.init = function(doubles_flg) {
    this.members = null;
    this.doubles = doubles_flg;
}

MemberCtrl.prototype.addMember = function(id,name) {
    if(this.members) {
      this.members.push(new MemberCls(id,name));
    } else {
      this.members = new Array();
      this.members[0] = new MemberCls(id,name);
    }
}

MemberCtrl.prototype.setResult = function(games)  {
   var i = games.length;
   var winteam='';
   var loseteam='';
   this.resetGames();

   do {
      var h = games.length - i;

      if(typeof games[h] == 'undefined')
         continue;
      
      if(games[h]['hantei']  == 1) {
         winteam = games[(games.length - i)]['team1'];
         loseteam = games[(games.length - i)]['team2'];
      } else if(games[(games.length - i)]['hantei']  == 2) {
         winteam = games[(games.length - i)]['team2'];
         loseteam = games[(games.length - i)]['team1'];
      } else if(games[(games.length - i)]['hantei']  == 3) {
         var l = this.members.length;
         var drawteam1 = games[(games.length - i)]['team1'];
         var drawteam2 = games[(games.length - i)]['team2'];
         
         do {
          this.members[(this.members.length - l)].addDrawNum(drawteam1,drawteam2);
        } while(--l);
         continue;
      }

      var winteams = this.splitTeams(winteam);
      var loseteams = this.splitTeams(loseteam);

      var l = this.members.length;
      do {
        this.members[(this.members.length - l)].addWinNum(winteams);
        this.members[(this.members.length - l)].addLoseNum(loseteams);
     } while(--l);
   } while(--i);
}

MemberCtrl.prototype.splitTeams = function(strTeam) {
  var tmp = undefined;
  if(this.doubles == true) {
    tmp = strTeam.split('_');
  } else {
    tmp = new Array();
    tmp[0] = strTeam;
  }
  return tmp;
}

MemberCtrl.prototype.getTextHead = function() {
  var i = this.members.length;
  var ret = '';
  do {
    ret += this.members[(this.members.length - i)].getTextHead() + '\n';
  } while (--i);
  return ret;
}

MemberCtrl.prototype.getTextEnd = function(hd,sep) {
  if(this.members != null) {
    var i = this.members.length;
    var ret = '';
    do {
      ret += hd + this.members[(this.members.length - i)].getTextEnd() + sep;
    } while (--i);
    return ret;
  }
}

var memberctrl = new MemberCtrl();

  function csv2json(data){
    var jsonArray = [];
    var csvArray = data.split('\r\n');
     
    for (var i = 0; i < csvArray.length - 1; i++) {
      var a_line = new Array();
      // カンマで区切られた各データに分割する
      var csvArrayD = csvArray[i].split(',');
      //// 各データをループ処理する
      jsonArray.push(csvArrayD);
    }
    return jsonArray;
  }

  function onSuccess(data, status){
    $.mobile.loading("show");
    kumiawase = csv2json(data);
    setGameList(kumiawase);
    if(game_num>0)
      setGameKekka((game_num-maxloop)*g_men, (game_num)*g_men);
    setTimeout(function(){
      $.mobile.loading( "hide" );
      var tmp = "li.ph-tap[name='lishiai_"+ (game_num-5+1)+"']";
      $(tmp).css("background", "#6495ed");     
    }, 700);
  }

  function onError(data, status){
      // handle an error
      alert("err");
  }   

  function do_command( ninzu ){
      $.ajax({
          type: "GET",
          url: ninzu + ".csv",
          cache: false,
          success: onSuccess,
          error: onError
      });
      return false;
  }

  function listRefreshFunc() {
     $('#shiaiokikae:visible').listview('refresh');
     $("li.ph-tap").bind("tap", function(){
       var liname="li.ph-tap[name='" + $(this).attr("name") + "']";
       $("li.ph-tap").css("background", "#ffffff");
       $(liname).css("background", "#6495ed");
     });
  }

      function getKumiawaseFromNum(kumiawase,men,ninzu,doubles,to,limit) {
        var okuri = (doubles == 1 ? 2 : 1) * men;
        var kai=0;
        var ret=new Array(limit);

        // 表示
        var start_index = to * okuri;
        if(start_index >= kumiawase.length) {
	   start_index = start_index % kumiawase.length;
        }

        for(var i=0;i<limit ;i++) {
          ret[i] = new Array((doubles==1 ? 4 : 2) * men);
	  for(var l=0;l<men;l++) {
            for(var j=0;j<(doubles==1 ? 4 : 2);j++) {
              if((doubles==1) && (j==2)) {
                start_index += 1;
              }
              if(start_index >= kumiawase.length) {
                start_index = 0;
              }
	      ret[i][(doubles==1 ? 4 : 2)*l+j]=kumiawase[start_index][j % 2];
            }
            start_index += 1;
          }
        }
        return ret;
      }

  function setDialogOpen() {

     $(".dialogopenbtn").click(function(){

       var aid=$(this).attr("id");
//       var tmp="a#"+aid;
//       g_gameindex = $(tmp).parent("li.ph-tap").jqmData("gid");
       g_gameindex = $(this).parent().parent().parent().parent().jqmData("gid");
       if(g_lastGameindex < g_gameindex) {
          g_lastGameindex = g_gameindex;
       }
       g_strLeft = $(this).jqmData('jibunteam');
       g_strRight = $(this).jqmData('aiteteam');
       g_nowGameNum= $(this).jqmData('shiai');
       var strTaisen = g_strLeft + ' VS ' + g_strRight;
       var strLeft = g_strLeft;
       var strRight = g_strRight;
       if(g_doubles==true) {
         strLeft = g_strLeft.replace('_',' ');
         strRight = g_strRight.replace('_',' ');
       }

       $(".taisen").text(strTaisen+'の勝敗設定');
       $(".left_t_win").text(strLeft + 'の勝ち');
       $(".right_t_win").text(strRight + 'の勝ち');
       $(".left_t_tensu").text(strLeft + 'の点数');
       $(".right_t_tensu").text(strRight + 'の点数');


       if((typeof games[g_gameindex] != 'undefined') || (games[g_gameindex] != null)) {
        $('input[name=r1]').val([games[g_gameindex]['hantei']]).checkboxradio('refresh');
        var myselect = $("select#select-choice-10");
        myselect[0].selectedIndex = parseInt(games[g_gameindex]['tokuten_l'])+1;
        myselect.selectmenu("refresh");
        myselect = $("select#select-choice-11");
        myselect[0].selectedIndex = parseInt(games[g_gameindex]['tokuten_r'])+1;
        myselect.selectmenu("refresh");

 } else {

        $('input[name=r1]').val([0]).checkboxradio('refresh');
        var myselect = $("select#select-choice-10");
        myselect[0].selectedIndex = 0;
        myselect.selectmenu("refresh");
        myselect = $("select#select-choice-11");
        myselect[0].selectedIndex = 0;
        myselect.selectmenu("refresh");
}

     });
  }

  function setGameKekka(from,to) {
    for(var i = from;i<to;i++) {
       if((typeof games[i] != 'undefined') && (games[i] != null)) {
          var r1 = games[i]['hantei'];
          var jibun = '#' + (games[i]['shiai']) + '_' + games[i]['team1'];
          var aite = '#' + (games[i]['shiai']) + '_' + games[i]['team2'];
          var jibun_tensu = games[i]['tokuten_l'];
          var aite_tensu = games[i]['tokuten_r'];

          if(r1 != 0) {
            if(r1 == 1) {
              $(jibun).text('○');
              $(aite).text('×');
            } else if(r1 == 2){
              $(jibun).text('×');
              $(aite).text('○');
            } else if(r1 == 3) {
              $(jibun).text('△');
              $(aite).text('△');
            }
          } else {
            $(jibun).text('');
            $(aite).text('');　　　　　　　　　
          }
          if(jibun_tensu > -1) {
             $(jibun).append(jibun_tensu);
          }
          if(aite_tensu > -1) {
            $(aite).append(aite_tensu);
          }
       }
    }
  }

  function setDoublesFlg() {
     var doubles = $('#flip-min').val();
     g_doubles = (doubles == 1 ? true : false);
  }

  function getNinzu() {
     return parseInt($('#select-choice-1').val());
  }

  function getMensu() {
     return parseInt($('#select-choice-2').val());
  }

  function setGameList(kumiawase) {

     var men = getMensu();
     var ninzu = getNinzu();
     setDoublesFlg();

     if(men > Math.floor(ninzu / (g_doubles == 1 ? 4 : 2))) {
        men = Math.floor(ninzu / (g_doubles == 1 ? 4 : 2));
     }

     g_men = men;

     var ret = getKumiawaseFromNum(kumiawase,men,ninzu,g_doubles,game_num,maxloop);

     // 表示
     var text='';

     for(var i=0;i<maxloop;i++) {
       text += '<li data-role="list-divider">第' + (game_num+i+1) + '試合</li>';
       for(var l=0;l<men;l++) {
         text += '<li class="ph-tap" data-gid="'+ (((game_num+i)*men)+l) +'" name="lishiai_' +(game_num+i+1)+'">';
         if(g_doubles == 1) { 
            text += '<div class="ui-grid-d">';
            text += '<div class="ui-block-a"><div class="button-wrap"><a id="a'+((i*men)+l)+'_1'+'" href="#dialog" data-role="button" data-jibunteam="'+ret[i][l*4]+'_'+ret[i][l*4+1]+'" data-aiteteam="'+ret[i][l*4+2]+'_'+ret[i][l*4+3]+'" data-shiai="'+(game_num+i+1)+'" class="ui-shadow ui-btn ui-corner-all dialogopenbtn">' + ret[i][l*4] + '</a></div></div>';
            text += '<div class="ui-block-b"><div class="button-wrap"><a id="a'+((i*men)+l)+'_2'+'" href="#dialog" data-role="button" data-jibunteam="'+ret[i][l*4]+'_'+ret[i][l*4+1]+'" data-aiteteam="'+ret[i][l*4+2]+'_'+ret[i][l*4+3]+'" data-shiai="'+(game_num+i+1)+'" class="ui-shadow ui-btn ui-corner-all dialogopenbtn">' + ret[i][l*4+1] + '</a></div><div id="'+(game_num+i+1)+'_'+ret[i][l*4]+'_'+ret[i][l*4+1]+'"></div></div>';
            text += '<div class="ui-block-c"><div class="button-wrap"></div></div>';
            text += '<div class="ui-block-d"><div class="button-wrap"><a id="a'+((i*men)+l)+'_3'+'" href="#dialog" data-role="button" data-jibunteam="'+ret[i][l*4+2]+'_'+ret[i][l*4+3]+'" data-aiteteam="'+ret[i][l*4]+'_'+ret[i][l*4+1]+'" data-shiai="'+(game_num+i+1)+'" class="ui-shadow ui-btn ui-corner-all dialogopenbtn">' + ret[i][l*4+2] + '</a></div></div>';
            text += '<div class="ui-block-e"><div class="button-wrap"><a id="a'+((i*men)+l)+'_4'+'" href="#dialog" data-role="button" data-jibunteam="'+ret[i][l*4+2]+'_'+ret[i][l*4+3]+'" class="ui-shadow ui-btn ui-corner-all dialogopenbtn">' + ret[i][l*4+3] + '</a></div><div id="'+(game_num+i+1)+'_'+ret[i][l*4+2]+'_'+ret[i][l*4+3]+'"></div></div>';
         } else {
            text += '<div class="ui-grid-b">';
            text += '<div class="ui-block-a"><div class="button-wrap"><a id="a'+((i*men)+l)+'_1'+'" href="#dialog" data-role="button" data-jibunteam="'+ret[i][l*2]+'" data-aiteteam="'+ret[i][l*2+1]+'" data-shiai="'+(game_num+i+1)+'" class="ui-shadow ui-btn ui-corner-all dialogopenbtn">' + ret[i][l*2] + '</a></div><div id="'+(game_num+i+1)+'_'+ret[i][l*2]+'"></div></div>';
            text += '<div class="ui-block-b"><div class="button-wrap"></div></div>';
            text += '<div class="ui-block-c"><div class="button-wrap"><a id="a'+((i*men)+l)+'_2'+'" href="#dialog" data-role="button" data-jibunteam="'+ret[i][l*2+1]+'" data-aiteteam="'+ret[i][l*2]+'" class="ui-shadow ui-btn ui-corner-all dialogopenbtn">' + ret[i][l*2+1] + '</a></div><div id="'+(game_num+i+1)+'_'+ret[i][l*2+1]+'"></div></div>';
         }
          text += '</div>';
       }
       text +='</li>';
       $('#shiaiokikae').html(text);
     }
     game_num+=5;

     listRefreshFunc();
     setDialogOpen();
  }

  function initMemberCtrl() {
       memberctrl.init(g_doubles);

       $('li.clmem').each(function(){
          var txtid = '#' + $(this).attr('id') + ' input';
          var inpval = $(txtid).val();
          if((typeof inpval != 'undefined') && (inpval != null) && (inpval.length > 0)) {
            var hthreetxt = '#' + $(this).attr('id') + ' h3';
            var hnum = parseInt($(hthreetxt).text());
            memberctrl.addMember(hnum, inpval);
          }
       });
  }

  function initMemberCtrlForMenu() {
       setDoublesFlg();
       memberctrl.init(g_doubles);
       var ninzu = getNinzu();
       for(var i=1;i<(ninzu+1);i++) {
            memberctrl.addMember(i, i);
       }
  }


  function setMailBun() {
      var now = new Date();
      var y   = now.getFullYear();
      var m   = now.getMonth()+1;
      var d   = now.getDate();
      var shohai = new Array(getNinzu());
      var text = "本日はお疲れ様でした\n\n";
      text += "本日("+y+"年"+m+"月"+d+"日"+")の試合結果をお送りします\n\n";
      if(memberctrl.getMembersNum() > 0) {
         memberctrl.setResult(games);
         text += memberctrl.getTextHead() + "\n";
      }

      var lastshiai = 0;
      for(var i=0;i<=g_lastGameindex;i++) {
         if((typeof games[i] != 'undefined') && (games[i] != null)) {
           if(lastshiai != games[i]['shiai']) {
             text += "第"+games[i]['shiai'] + "試合\n";
             lastshiai = games[i]['shiai'];
           }
           var r1 = "";
           var r2 = "";
           if(games[i]['hantei'] == 1) {
             r1 = "○";
             r2 = "×";
           } else if(games[i]['hantei'] == 2) {
             r1 = "×";
             r2 = "○";
           } else if(games[i]['hantei'] == 3) {
             r1 = "△";
             r2 = "△";
           }
           var team1 = games[i]['team1'];
           var team2 = games[i]['team2'];
           if(g_doubles == true) {
              team1 = games[i]['team1'].replace('_',' ');
              team2 = games[i]['team2'].replace('_',' ');
           }

           text += team1 + "(" +  r1 + ") VS " + team2 + "(" + r2 +")";
           if((games[i]['tokuten_l'] > -1) && (games[i]['tokuten_r'] > -1)) {
             text += " " + games[i]['tokuten_l'] + "-" + games[i]['tokuten_r'];
           }
           text += "\n\n";
         }
      }
      if(memberctrl.getMembersNum() > 0) {
         text += memberctrl.getTextEnd("","\n") + "\n";
      }
      text += "--\nテニス乱数表君 http://osamasa.github.io/\n";
      $("#textarea1").text(text);
      $.mobile.changePage("#s3");
  }

  function sendmail() {
     $.mobile.changePage("mailto:?subject=お疲れさまでした&body=" + $("#textarea1").text());
  }

   $(document).bind("mobileinit", function(){
     // 初期値の上書き
    $.mobile.loader.prototype.options.text = "loading";
    $.mobile.loader.prototype.options.textVisible = false;
    $.mobile.loader.prototype.options.theme = "a";
    $.mobile.loader.prototype.options.html = "";
   });

   $(document).on('pageshow', "#s1",function() {
     g_mygamenid = '#s1';
     game_num=0;
     if(games != null) {
        games = null;
     }
     games = new Array(256);
     memberctrl.init(g_doubles);
   });

   $(document).on('pageshow', "#s2",function() {
     g_mygamenid = '#s2';
     listRefreshFunc();
     setDialogOpen();
   });

   $(document).on('pageinit','#s1',function() {
     $(".nextgame").click(function(){

       var ninzu = getNinzu();
       do_command(ninzu);
     });
   });

   $(document).on('pageinit','#s2',function() {

     $(".prevgame").click(function(){

      game_num = game_num - (maxloop * 2);
      if(game_num < 0) {
         game_num = 0;
         $.mobile.changePage("#s1");
         return false;
       }
       var ninzu = getNinzu();
       do_command(ninzu);
     });
   });

   $(document).on('pageinit','#s4', function() {
     $(".setmailbun").click(function() {
       initMemberCtrl();
       $.mobile.changePage( g_mygamenid );
     });
   });

   $(document).on('pageshow','#s4', function() {
      var ninzu = getNinzu();
      ninzu++;
      var maxnum = 30;
      do {
        var $tmp = "li#li" + maxnum;
        $($tmp).css("display", "none");
      } while(ninzu < maxnum--);
      $("#s4").page();
      $("#memberlist").listview('refresh');
   });

   $(document).on('pageshow','#dialog', function() {
       $('#dialogsettei').click(function() {

          var r1 = $('[name=r1]:checked').val();
          var jibun = '#' + g_nowGameNum + '_' + g_strLeft;
          var aite = '#' + g_nowGameNum + '_' + g_strRight;

          games[g_gameindex] = new Array();
          games[g_gameindex]['shiai'] = g_nowGameNum;
          games[g_gameindex]['hantei'] = r1;
          games[g_gameindex]['team1'] = g_strLeft;
          games[g_gameindex]['team2'] = g_strRight;
          games[g_gameindex]['tokuten_l'] = $("#select-choice-10").children(':selected').val();
          games[g_gameindex]['tokuten_r'] = $("#select-choice-11").children(':selected').val();

          if(r1 != 0) {
            if(r1 == 1) {
              $(jibun).text('○');
              $(aite).text('×');
            } else if(r1 == 2){
              $(jibun).text('×');
              $(aite).text('○');
            } else if(r1 == 3) {
              $(jibun).text('△');
              $(aite).text('△');
            }
          } else {
            $(jibun).text('');
            $(aite).text('');　　　　　　　　　
          }
          if($("#select-choice-10").val() > -1) {
             $(jibun).append($("#select-choice-10").children(':selected').val());
          }
          if($("#select-choice-11").val() > -1) {
            $(aite).append($("#select-choice-11").children(':selected').val());
          }
       });
   });

   $(document).on('pageshow','#s3', function() {
     g_mygamenid = '#s3';
     setMailBun();
   });
   $(document).on('pageinit','#s3', function() {
     $('.sendmail').click(function() {     
       // sendmail();
     });
   });

   function setMenu() {
      $('#slidesyouhai').empty();
      var atokatazuke_flg = false;
 
      if(games != null) {
        if(memberctrl.members == null) {
          initMemberCtrlForMenu();
          atokatazuke_flg = true;
        }
        memberctrl.setResult(games);
      }
      html = memberctrl.getTextEnd('<p>','</p>');
      $('#slidesyouhai').html(html);
      if(atokatazuke_flg) {
         memberctrl.init(g_doubles);
      }
   }

   function clickGame() {
       if(g_mygamenid == '#s1') {
         var ninzu = getNinzu();
         do_command(ninzu);
       }
   }

</script>
</head>
<body>
  <div data-role="dialog" id="oshirase">
    <div data-role="header">
      <h2><div class="taisen">更新のお知らせ</div></h2>
      <div data-role="content">
	<ul>
	  <li>2014/04/28 Ver 1.2.0 各番号に名前を割り当てられるようにしました。
	  <li>2014/03/16 Ver 1.1.1 右上のグリッドボタンを押すと勝敗結果のメール文が作成されます。</li>
	  <li>2014/03/16 Ver 1.1.0 プレイヤーボタンを押すと勝敗および得点を記録出来ます。</li>
	  <li>2014/03/10 Ver 1.0.0 作成公開開始</li>
	</ul>
	<p><a href="#s1" data-role="button" >閉じる</a></p>
      </div>
    </div> 
  </div>
  <div data-role="page" id="s1">
    <div data-role="header" data-theme="a" id="header">
      <h1>テニス乱数表君</h1>
      <a href="#menu" data-icon="grid" data-iconpos="notext" data-direction="reverse" class="ui-btn-left menu" onclick="setMenu();">Menu</a>
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right">Home</a>
    </div>
    <div data-role="content">
      <form>
	  <div class="containing-element">
	    <label for="flip-min">ゲーム形式:</label>
	    <select name="slider" id="flip-min" data-role="slider">
	      <option value="1">ダブルス</option>
	      <option value="0">シングルス</option>
	    </select>
	  </div>

	<div data-role="fieldcontain">
          <label for="select-choice-1">人数</label>
          <select name="select-choice-1" id="select-choice-1">
            <option value="4">4人</option>
            <option value="5">5人</option>
            <option value="6">6人</option>
            <option value="7">7人</option>
            <option value="8">8人</option>
            <option value="9">9人</option>
            <option value="10">10人</option>
            <option value="11">11人</option>
            <option value="12">12人</option>
            <option value="13">13人</option>
            <option value="14">14人</option>
            <option value="15">15人</option>
            <option value="16">16人</option>
            <option value="17">17人</option>
            <option value="18">18人</option>
            <option value="19">19人</option>
            <option value="20">20人</option>
            <option value="21">21人</option>
            <option value="22">22人</option>
            <option value="23">23人</option>
            <option value="24">24人</option>
            <option value="25">25人</option>
            <option value="26">26人</option>
            <option value="27">27人</option>
            <option value="28">28人</option>
            <option value="29">29人</option>
            <option value="30">30人</option>
          </select>
	</div>
	<div data-role="fieldcontain">
          <label for="select-choice-2">面数</label>
          <select name="select-choice-2" id="select-choice-2">
            <option value="1">1面</option>
            <option value="2">2面</option>
            <option value="3">3面</option>
            <option value="4">4面</option>
            <option value="5">5面</option>
            <option value="6">6面</option>
            <option value="7">7面</option>
            <option value="8">8面</option>
            <option value="9">9面</option>
            <option value="10">10面</option>
          </select>
	</div>
	<a href="#s2" class="nextgame" id="b1" data-role="button" type="button">決定</a>
      </form>
    </div>
    <div data-role="footer">
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Home</a>
      <h2>Osamasa(C) 2014</h2>
    </div>
  </div>
  <div data-role="page" id="s2">
    <div data-role="header" data-theme="a" id="header">
      <h1>テニス乱数表君</h1>
      <a href="#menu" data-icon="grid" data-iconpos="notext" data-direction="reverse" class="ui-btn-left menu" onclick="setMenu();">Menu</a>
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right">Home</a>
    </div>
    <div data-role="content">
      <div class="content-primary main-content">

	<ul data-role="listview" id="buttonlist">
	  <li>
	    <div class="ui-grid-a">
	      <div class="ui-block-a">
		<input type="button" class="nextgame" id="b2" value="もっと見る">
	      </div>
	      <div class="ui-block-b">
		<input type="button" class="prevgame" id="b3" value="戻る">
	      </div>
	  </li>
	</ul>

	<ul data-role="listview" id="shiaiokikae">
	  <li data-role="list-divider">第1試合</li> 
	  <li>
	    <div class="ui-grid-d">
	      <div class="ui-block-a" ><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all dialogopenbtn">1</button></div></div>
	      <div class="ui-block-b" ><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">2</button></div></div>
	      <div class="ui-block-c"></div>
	      <div class="ui-block-d"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">3</button></div></div>
	      <div class="ui-block-e"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">4</button></div></div>
	    </div>
	  </li> 
	  <li>
	    <div class="ui-grid-d">
	      <div class="ui-block-a"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">1</button></div></div>
	      <div class="ui-block-b"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">2</button></div></div>
	      <div class="ui-block-c"></div>
	      <div class="ui-block-d"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">3</button></div></div>
	      <div class="ui-block-e"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">4</button></div></div>
	    </div>
	  </li> 
	  <li>
	    <div class="ui-grid-d">
	      <div class="ui-block-a"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">1</button></div></div>
	      <div class="ui-block-b"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">2</button></div></div>
	      <div class="ui-block-c"></div>
	      <div class="ui-block-d"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">3</button></div></div>
	      <div class="ui-block-e"><div class="button-wrap"><button class="ui-shadow ui-btn ui-corner-all">4</button></div></div>
	    </div>
	  </li> 
	</ul>
	<ul data-role="listview" id="buttonlist">
	  <li>
	    <div class="ui-grid-a">
	      <div class="ui-block-a">
		<input type="button" class="nextgame" id="b2" value="もっと見る" />
	      </div>
	      <div class="ui-block-b">
		<input type="button" class="prevgame" id="b3" value="戻る" />
	      </div>
	  </li>
	</ul>
      </div>
    </div>
    <div data-role="footer">
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Home</a>
      <h2>Osamasa(C) 2014</h2>
    </div>
  </div>

      <div data-role="dialog" id="dialog">
	<div data-role="header">
	  <h2><div class="taisen">%sの勝敗設定</div></h2>
	</div> 
	<div data-role="content">
	  <fieldset data-role="controlgroup">
	    <legend>勝敗結果を選択:</legend>
     	    <input type="radio" name="r1" id="r1" value="0" checked="checked" />
     	    <label for="r1">-</label>
     	    <input type="radio" name="r1" id="r2" value="1" />
     	    <label for="r2"><div class="left_t_win">%sの勝ち</div></label>
     	    <input type="radio" name="r1" id="r3" value="2" />
     	    <label for="r3"><div class="right_t_win">%sの勝ち</div></label>
     	    <input type="radio" name="r1" id="r4" value="3" />
     	    <label for="r4">引き分け</label>
	  </fieldset>
	  <div class="ui-grid-a">
	    <div class="ui-block-a">
	      <label for="select-choice-10" class="select"><div class="left_t_tensu">%sの点数</div></label>
	    
	      <select name="select-choice-10" id="select-choice-10">
		<option value="-1">-</option>
		<option value="0">0</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
	      </select>
	    </div>
	    <div class="ui-block-b">
	      <label for="select-choice-11" class="select"><div class="right_t_tensu">%sの点数</div></label>
	      <select name="select-choice-11" id="select-choice-11">
		<option value="-1">-</option>
		<option value="0">0</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
	      </select>
	    </div>
	    <div class="ui-block-a">
	      <p><a id="dialogsettei" href="#s2" data-role="button">決定</a></p>
	    </div>
	    <div class="ui-block-b">
	      <p><a data-role="button" data-rel="back">キャンセル</a></p>
	    </div>
	  </div>
	</div>
      </div>
  <div data-role="page" id="s3">
    <div data-role="header" data-theme="a" id="header">
      <h1>テニス乱数表君</h1>
      <a href="#menu" data-icon="grid" data-iconpos="notext" data-direction="reverse" class="ui-btn-left menu" onclick="setMenu();">Menu</a>
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right">Home</a>
    </div>
    <div data-role="content">
      <h2>メール</h2>
      <div data-role="fieldcontain">
	<textarea name="textarea1" id="textarea1"></textarea>
        
      </div>
<!--      <input type="button" class="sendmail" id="mb3" value="送信" /> -->
<!--       <a href="mailto:?subject=お疲れ様&body=ほげほげ" data-role="button" >メール </a> -->
    </div>
    <div data-role="footer">
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Home</a>
      <h2>Osamasa(C) 2014</h2>
    </div>
  </div>

  <div data-role="page" id="s4">
    <div data-role="header" data-theme="a" id="header">
      <h1>テニス乱数表君</h1>
      <a href="#menu" data-icon="grid" data-iconpos="notext" data-direction="reverse" class="ui-btn-left menu" onclick="setMenu();">Menu</a>
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right">Home</a>
    </div>
    <div data-role="content">
      <h2>メンバー割付</h2>
      <div data-role="fieldcontain">
	<ul data-role="listview" id="memberlist" data-inset="true">
	  <li id="li1" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>1</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" id=""/></div></div></li>
	  <li id="li2" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>2</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li3" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>3</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li4" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>4</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li5" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>5</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li6" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>6</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li7" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>7</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li8" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>8</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li9" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>9</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li10" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>10</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li11" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>11</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li12" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>12</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li13" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>13</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li14" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>14</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li15" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>15</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li16" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>16</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li17" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>17</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li18" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>18</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li19" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>19</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li20" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>20</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li21" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>21</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li22" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>22</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li23" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>23</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li24" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>24</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li25" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>25</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li26" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>26</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li27" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>27</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li28" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>28</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li29" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>29</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li id="li30" class="clmem"><div class="ui-grid-a"><div class="ui-block-a" style="width:10%;"><h3>30</h3></div><div class="ui-block-b" style="width:90%;"><input type="text" /></div></div></li>
	  <li>
	    <input type="button" class="setmailbun" id="mb1" value="決定" />
	  </li>
	</ul>
      </div>
    </div>
    <div data-role="footer">
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Home</a>
      <h2>Osamasa(C) 2014</h2>
    </div>
  </div>
  <div data-role="page" id="s5">
    <div data-role="header" data-theme="a" id="header">
      <h1>テニス乱数表君</h1>
      <a href="#s1" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Home</a>
      <a href="#s4" data-icon="back" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-back">Back</a>
    </div>
    <div data-role="content">
      <h2>メンバー参照</h2>
      <div data-role="fieldcontain">
	<ul data-role="listview" id="sansyoulist">
	  <li><div class="ui-grid-a"><div class="ui-block-a" style="width:30%;"><input type="radio" name="sr1"/></div><div class="ui-block-b" >おさちゃん</div></div></li>
	  <li><div class="ui-grid-a"><div class="ui-block-a" style="width:30%;"><input type="radio" name="sr1"/></div><div class="ui-block-b" >おさちゃん</div></div></li>
	  <li><div class="ui-grid-a"><div class="ui-block-a" style="width:30%;"><input type="radio" name="sr1"/></div><div class="ui-block-b" >おさちゃん</div></div></li>
	  <li><div class="ui-grid-a"><div class="ui-block-a" style="width:30%;"><input type="radio" name="sr1"/></div><div class="ui-block-b" >おさちゃん</div></div></li>
	  <li>
	    <div class="ui-grid-a">
	      <div class="ui-block-a">
		<p><a href="#s4" data-role="button" >選択</a></p>
	      </div>
	      <div class="ui-block-b">
		<p><a data-role="button" data-rel="back">戻る</a></p>
	      </div>
	    </div>
	  </li>
	</ul>
      </div>
    </div>

  </div>
    <script src="srobbin-jquery-pageslide-d00801f/jquery.pageslide.js"></script>
    <div id="menu">
      <h2>途中経過</h2>
      <div id="slidesyouhai">
	<p>長田(1)&nbsp;3勝4負1分</p>
	<p>田中(2)&nbsp;3勝4負1分</p>
	<p>3&nbsp;3勝4負1分</p>
      </div>
      <hr size="2" color="#999999" style="border" />
      <h2>操作メニュー</h2>
      <div data-role="fieldcontain" id="slidemenu">
	<p><a href="#s2" onclick="clickGame();$.pageslide.close();">ゲーム</a></p>
	<p><a href="#s4" onclick="$.pageslide.close();" >メンバ</a></p>
	<p><a href="#s3" onclick="$.pageslide.close();" >メール</a></p>	
      </div>
      <hr size="2" color="#999999" style="border" />
      <p><a href="#s1" onClick="$.pageslide.close();">設定画面</a></p>
    </div>
    <script>
        $(".menu").pageslide({ modal : false });
    </script>
  </div>
</body>
</html>
